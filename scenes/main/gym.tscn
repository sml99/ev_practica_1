[gd_scene load_steps=21 format=3 uid="uid://bbrsn3v0vyftf"]

[ext_resource type="PackedScene" uid="uid://c6adx8bu5ocy7" path="res://scenes/environments/entrance_room.tscn" id="1_urlyb"]
[ext_resource type="PackedScene" uid="uid://dkot7i0j4suuo" path="res://scenes/main/camera/camera.tscn" id="2_r8ho3"]
[ext_resource type="PackedScene" uid="uid://bl40ifodl4ulk" path="res://scenes/environments/floor.tscn" id="3_jl6yi"]
[ext_resource type="Script" path="res://scripts/toggle_light.gd" id="3_k7brm"]
[ext_resource type="PackedScene" uid="uid://bpgaks0gqnou5" path="res://scenes/props/training_stuff.tscn" id="4_o0bpm"]
[ext_resource type="PackedScene" uid="uid://cqkvi6thli1kq" path="res://scenes/environments/connector.tscn" id="5_ixqqw"]
[ext_resource type="Script" path="res://scripts/fps_player.gd" id="7_y56js"]
[ext_resource type="Script" path="res://scripts/camera_controller.gd" id="8_8qn8s"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_84lov"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_6wjl5"]
sky_material = SubResource("ProceduralSkyMaterial_84lov")

[sub_resource type="Environment" id="Environment_40441"]
background_mode = 2
background_energy_multiplier = 0.65
sky = SubResource("Sky_6wjl5")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="Animation" id="Animation_wei64"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:light_energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.8]
}

[sub_resource type="Animation" id="Animation_dieko"]
resource_name = "light_flicker"
length = 4.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:light_energy")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.5, 2, 2.5, 3.2, 4),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 0,
"values": [0.8, 0.1, 1.2, 0.2, 0.8, 0.8, 0.3, 0.1, 0.8]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ofqqv"]
_data = {
"RESET": SubResource("Animation_wei64"),
"light_flicker": SubResource("Animation_dieko")
}

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_beb87"]
radius = 0.833955
height = 3.02868

[sub_resource type="LabelSettings" id="LabelSettings_8ldx7"]
font_color = Color(1, 0, 0, 1)

[sub_resource type="Animation" id="Animation_hadn3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(-0.346857, -0.480679, 0.0190589)]
}

[sub_resource type="Animation" id="Animation_dr3vj"]
resource_name = "camera_y"

[sub_resource type="Animation" id="Animation_gj4n5"]
resource_name = "surveillance_sweep"
length = 6.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:rotation")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 3, 6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [Vector3(-0.347321, -0.0872665, 0.0191986), Vector3(-0.347321, -0.872665, 0.0191986), Vector3(-0.347321, -0.0872665, 0.0191986)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_cj2pd"]
_data = {
"RESET": SubResource("Animation_hadn3"),
"camera_y": SubResource("Animation_dr3vj"),
"surveillance_sweep": SubResource("Animation_gj4n5")
}

[node name="Node3D" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_40441")

[node name="EntranceRoom" parent="." instance=ExtResource("1_urlyb")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 0.967044, 0, 0, 0.318452)

[node name="CameraPivot" parent="EntranceRoom" instance=ExtResource("2_r8ho3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1.03408, -9.76843, 2.27862, 0.0119509)

[node name="ChairSpotlight" type="SpotLight3D" parent="EntranceRoom"]
transform = Transform3D(1, 0, 0, 0, 0.17717, 0.985193, 0, -1.01879, 0.171448, -9.2889, 5.61997, -1.61273)
light_energy = 0.8
shadow_enabled = true
spot_range = 10.0
spot_angle_attenuation = 0.2
script = ExtResource("3_k7brm")

[node name="LightAnimator" type="AnimationPlayer" parent="EntranceRoom/ChairSpotlight"]
libraries = {
"": SubResource("AnimationLibrary_ofqqv")
}

[node name="FillLight" type="OmniLight3D" parent="EntranceRoom"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1.03408, -7.54325, 5.17862, 2.57605)
light_color = Color(0.890196, 0.94902, 0.992157, 1)
light_energy = 0.2
shadow_enabled = true
omni_range = 15.0

[node name="FirstFloor" parent="." instance=ExtResource("3_jl6yi")]
transform = Transform3D(-1.09143, 0, -8.74228e-08, 0, 1, 0, 9.54162e-08, 0, -1, 21.3885, 0.6786, 0.278687)

[node name="TrainingStuff" parent="FirstFloor" instance=ExtResource("4_o0bpm")]
transform = Transform3D(-0.916229, 0, 8.00993e-08, 0, 1, 0, -8.74231e-08, 0, -1, -0.351248, 0.0474314, -2.98023e-08)

[node name="OmniLight3D" type="OmniLight3D" parent="FirstFloor"]
transform = Transform3D(0.916229, 0, 2.84217e-13, 0, 1, 0, -7.10543e-15, 0, 1, 0, 5.67488, 0)
light_energy = 0.4
shadow_enabled = true
omni_range = 20.0

[node name="SecondFloor" parent="." instance=ExtResource("3_jl6yi")]
transform = Transform3D(-1.09143, 0, -8.74228e-08, 0, 1, 0, 9.54162e-08, 0, -1, 21.3875, 8.424, 0.279)

[node name="TrainingStuff2" parent="SecondFloor" instance=ExtResource("4_o0bpm")]
transform = Transform3D(0.916229, 0, 0, 0, 1, 0, 0, 0, 1, 2.68751, 0.0860767, -0.263355)

[node name="OmniLight3D" type="OmniLight3D" parent="SecondFloor"]
transform = Transform3D(0.916229, 0, 2.84217e-13, 0, 1, 0, -7.10543e-15, 0, 1, -0.0552483, 5.57643, 0)
light_energy = 0.4
shadow_enabled = true
omni_range = 20.0

[node name="Connector" parent="." instance=ExtResource("5_ixqqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0857725, -0.161486, 0)

[node name="MainOfficeLight" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 8.49016, 0)
light_color = Color(1, 0.956863, 0.901961, 1)
light_energy = 0.8
light_angular_distance = 45.0
shadow_bias = 1.0
shadow_normal_bias = 4.0
directional_shadow_mode = 1

[node name="StaticCamera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.852567, 0.522618, 0, -0.522618, 0.852567, 0.854395, 6.7384, 10.6041)

[node name="FPSPlayer" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10.2404, 3.72061, 13.8478)
script = ExtResource("7_y56js")

[node name="Yaw" type="Node3D" parent="FPSPlayer"]

[node name="Camera3D" type="Camera3D" parent="FPSPlayer/Yaw"]
current = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="FPSPlayer"]
transform = Transform3D(0.999998, -0.00146727, -0.00139143, 0.0014665, 0.999999, -0.00054649, 0.00139224, 0.000544437, 0.999999, 0, -1.48264, 0)
shape = SubResource("CapsuleShape3D_beb87")

[node name="ControlsLabel" type="CanvasLayer" parent="FPSPlayer"]

[node name="UI" type="Control" parent="FPSPlayer/ControlsLabel"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="ControlsLabel" type="Label" parent="FPSPlayer/ControlsLabel/UI"]
layout_mode = 0
offset_left = 23.0
offset_top = 94.0
offset_right = 186.0
offset_bottom = 221.0
text = "CONTROLS:
WASD - Move
Mouse - Look around  
SPACE - Jump
TAB - Switch Camera
E - Interact (when near objects)
Right Click - Show/Hide Cursor
ESC - Exit"

[node name="InfoLabel" type="Label" parent="FPSPlayer/ControlsLabel/UI"]
layout_mode = 0
offset_left = 22.0
offset_top = 27.0
offset_right = 275.0
offset_bottom = 91.0

[node name="InteractionLabel" type="Label" parent="FPSPlayer/ControlsLabel/UI"]
layout_mode = 0
offset_left = 26.0
offset_top = 314.0
offset_right = 66.0
offset_bottom = 337.0
label_settings = SubResource("LabelSettings_8ldx7")

[node name="SurveillanceSystem" type="Node3D" parent="."]

[node name="SurveillanceCamera" type="Camera3D" parent="SurveillanceSystem"]
transform = Transform3D(0.889516, 0.140257, -0.434844, 0.0179228, 0.940275, 0.339943, 0.456553, -0.310179, 0.833875, -14.0285, 5.40796, 8.75053)

[node name="AnimationPlayer" type="AnimationPlayer" parent="SurveillanceSystem/SurveillanceCamera"]
libraries = {
"": SubResource("AnimationLibrary_cj2pd")
}
autoplay = "surveillance_sweep"

[node name="CameraController" type="Node" parent="."]
script = ExtResource("8_8qn8s")
